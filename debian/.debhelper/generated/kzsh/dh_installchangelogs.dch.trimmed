kzsh (0.1.1-1) unstable; urgency=medium

  * kzsh 0.1.1: rename, localized --version, readline, packaging updates

 -- Krzysztof Demir Kuźniak <kuznix@kuznix.org>  Thu, 02 Oct 2025 20:11:42 +0200

kzsh (0.1.1) unstable; urgency=medium

  * Project rename and version bump
    - Rename project and binaries from `ksh` → `kzsh`.
    - Updated packaging metadata, install paths and build-system targets to use `kzsh` and `libkzsh`.
    - Bumped packaged version to 0.1.1.

  * Localized version output and metadata
    - Implemented bash-style `--version` output with localized strings (supported locales: en, pl, es, ja, zh, ru, de, fr, pt and fallback).
    - `--version` prints: product/version/triplet, copyright (configure-time year or runtime fallback),
      short GPL notice, short free-software line and warranty disclaimer.
    - Build-date and canonical triplet detection added with runtime fallbacks when configure macros are missing.
    - Export KSH_VERSION, KSH_BUILD_DATE and KSH_TARGET environment variables for external fetchers.

  * Interactive shell improvements
    - Optional Readline support (enabled when built with Readline). Line editing and arrow-key history navigation available when built with Readline.
    - Prompt colorization and `~` substitution implemented.
    - SIGINT handling improved so Ctrl-C cancels input instead of exiting the shell. Child processes restore default signals before exec.

  * Builtins and shell basics
    - Implemented several builtins: cd, source, alias, history, env, export, unset, exit/quit, and a version builtin that delegates to `print_version()`.
    - Minimal evaluator implemented to support interactive usage and simple scripting (still incremental).

  * Build system & cross-tooling
    - Autotools/Autoconf/Automake: updates to `configure.ac` and `Makefile.am` to add configure-time metadata (copyright year),
      define `HAVE_READLINE` when detected, and name targets as `kzsh`.
    - Meson and CMake buildfiles adjusted to reflect project rename.
    - Defensive code to handle incompletely-generated `config.h` values (runtime fallbacks for `${KZSH_COPYRIGHT_YEAR}` etc).

  * Packaging / distribution
    - Debian packaging skeleton updated for `kzsh` (control, changelog, .install files, rules). Debhelper-generated artifacts were synchronized to use `kzsh`.
    - `debian/rules` includes an override that creates placeholders for libraries, docs and headers which the current build may not produce yet; this unblocks initial packaging runs.
    - Notes: generated debhelper files should be regenerated cleanly (remove `debian/.debhelper` and run `debuild` / `dh` to regenerate). Replace placeholders with real installed artifacts as the project progresses.

  * Diagnostics, safety and minor bugfixes
    - Fixed several compile-time issues (nested function/stray return, unterminated block comment, missing includes).
    - Fixed `--version` formatting to ensure correct newline separation between copyright and license.
    - Minor snprintf/format-truncation warnings surfaced and left visible for future hardening.
    - Added configure-time macro `KZSH_COPYRIGHT_YEAR` (and compatibility alias `KSH_COPYRIGHT_YEAR`).

  * Developer / CI hygiene
    - Added work-in-progress notes for packaging and release automation.
    - Added environment defaults to encourage colored output for downstream tools (TERM/COLORTERM/CLICOLOR/FORCE_COLOR/LS_COLORS).
    - Advice included in repository for regenerating packaging bits and release tarballs.

  * Known issues / limitations
    - Persistent history file saving/loading (e.g., `~/.kzsh_history`) not fully implemented.
    - Job control, full POSIX/bourne/bash compatibility, programmable completion, and advanced prompt features are not complete.
    - Some auto-generated packaging files may be stale until regenerated; replace placeholders with real install targets in `Makefile` to avoid placeholder usage in future.
    - Cross-platform builds (macOS, *BSD, Windows via Cygwin/MSYS/mingw) need targeted testing and small portability fixes.
    - Full gettext/real i18n migration is pending (current translations are in-source fallback table).

  * Contributors
    - Krzysztof Demir Kuzniak <krzysztofdemirkuzniak@gmail.com>
    - (See Git history for additional contributors.)

  * Packaging & release notes
    - To build locally after editing changelog:
      - regenerate debhelper artifacts (optional): rm -rf debian/.debhelper
      - tag release: git tag -s v0.1.1 -m \"kzsh 0.1.1\"
      - build: debuild -us -uc

 -- Krzysztof Demir Kuzniak <krzysztofdemirkuzniak@gmail.com>  Thu, 02 Oct 2025 00:00:00 +0000
